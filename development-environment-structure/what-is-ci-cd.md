# 継続的インテグレーション/継続的デリバリー（CI/CD）とは

## 概要

ソフトウェア開発において、製造工程は多くの工数を必要とします。

その中で、コードスタイル（フォーマッターやCheckStyleなど）のチェック、バグなどの静的解析（SpotBugsなど）、コンパイル、ビルド、テスト、デプロイを行います。

デプロイ後には、WebブラウザやREST API用のクライアント（curlやPostmanなど）を利用し、ITやSTなどを行います。

これらのプロセスは、テスト実施にて障害発見後、コードの修正作業を行い、同じ作業を繰り返す可能性があります。

また、仕様変更などにより、コードの変更・修正が発生する可能性もあります。

稼働後も、機能の改善要望や障害の報告があれば、同様に同じ作業を繰り返します。

この工数を削減するために、自動的にソフトウェアの品質をチェックする`CI/CD`が考えられました。

`CI/CD`は、`CI（継続的インテグレーション）`と`CD（継続的デリバリー）`を組み合わせた用語です。

`CI/CD`は「ビルド」、「テスト」、「デプロイ」までのプロセスを自動化し、人の手を介す時間を短縮します。

これらの工程をプログラムが行うため、工程を繰り返したとしても、プログラムの実行時間がかかるのみです。

「コーディング」→「`CI`」→「`CD`」のサイクルを常に行うため、コーディングの品質が保たれます。

### CIとは

`CI`とは、Continuous Integration（継続的インテグレーション）の略です。

コードをGitHubなどのGitホスティングサービスのリポジトリにpushした際やPull Requestを出した際などのイベントごとに「ビルド」と「テスト」を自動で実行するように設定します。

実行結果が想定どおりに動作するかチェックし、問題が発生すればその旨を通知します。

`CI`の工程では、「ビルド」や「テスト」の自動化のほかに、コードスタイルのチェックや脆弱性診断などの静的解析を自動で実行する設定が可能です。

このように`CI`では、コードの品質を自動で管理することができます。

### CDとは

`CD`は、Continuous Delivery（継続的デリバリー）の略で、「デプロイ」を含めたコードの完成後の処理を自動化することを指します。

`CD`は厳密には、Continuous Delivery（継続的デリバリー）とContinuous Deployment（継続的デプロイメント）の二種類の使い分けをする場合があります。

これは、自動化の程度を表すために使用されます。

継続的デリバリーは一般に、変更に対して「ビルド」と「テスト」の実行後に、本番環境に反映してリリースするかの判断は人が行います（ステージング環境までは自動でデプロイすることが多いです）。

対して継続的デプロイメントは、本番環境への「ビルド」から「デプロイ」までのすべてが自動で行われます。

昨今では、GitHubなどで人のレビュー承認後のマージ後に、`CD`を実行することが多くなっています。

## 生産性・品質向上の理由

### バグの軽減

`CI/CD`を取り入れた開発サイクルでは、Gitの`main`ブランチや`develop`ブランチへマージする際に「ビルド」と「テスト」のプロセスを通すことになります。

この工程を自動化することによって、コードの変更に伴う不良をマージする前に発見し、本番環境まで残されるバグは少なくすることができます。

### レビュワーの負担軽減

「ビルド」や「テスト」が自動で行われるため、レビューするコードの動作は保証されます。

そのため、機能とは関係のない指摘を行う必要はなくなり、ロジックなどの本質的な部分に集中してレビューを行うことができます。

結果、コードの品質向上が見込めるようになります。

### 人員・時間の削減

手作業で行うテスト工程は、非常に時間のかかる作業になります。

軽微なバグの修正でコードに変更を加える修正がわずかであっても、デグレードを起こしてしまう可能性は0とは言い切れません。

デグレードが発生した場合、再度修正・テストをやり直さなければなりません。

納期やリリースまでの時間がない場合に、品質向上を人海戦術で解決することもありますが、要員やそれに伴うコストが必要になります。

また、追加でアサインされた要員はそのプロジェクトの教育時間も必要になります。

テストを自動で行えるということは、品質向上に費やしていた時間を削減でき、もともとアサインしていた人員はコードの修正に集中できます。

アプリケーションの「デプロイ」や「監視」、「復旧」を自動化することで、要員の負荷を削減することができます。

これらの、反復的で日常的なタスクの自動化によって生産性が向上し、バッファが生まれ、アプリケーション品質の向上により集中できるようになります。
